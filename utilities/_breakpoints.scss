//
// Breakpoints
//
// **************************************************

$breakpoints: (
	xxsmall: 0,
	xsmall:  420px,
	small:   560px,
	medium:  768px,
	large:   1024px,
	xlarge:  1200px,
	xxlarge: 1440px
) !default;


//
// From
//

@mixin break-from( $query ) {
	$value: break-from( $query );

	@if $value != null {
		@media screen and ( min-width: $value ) { @content; }
	} @else {
		@content;
	}
}


//
// Until
//

@mixin break-until( $query ) {
	$value: break-until( $query );

	@if $value != -1 {
		@media screen and ( max-width: $value ) { @content; }
	} @else {
		@content;
	}
}


//
// Only
//

@mixin break-only( $query ) {
	$value: break-only( $query );

	@if type-of( $value ) != list {
		@media screen and ( min-width: $value ) and ( max-width: $value ) { @content; }
	} @else if nth( $value, 1 ) != null and nth( $value, 2 ) != null {
		@media screen and ( min-width: nth( $value, 1 ) ) and ( max-width: nth( $value, 2 ) ) { @content; }
	} @else if nth( $value, 1 ) == null {
		@media screen and ( max-width: $value ) { @content; }
	} @else if nth( $value, 2 ) == null {
		@media screen and ( min-width: $value ) { @content; }
	}
}


//
// Break Mixin
//

@mixin break( $value ) {
	$key: nth( $value, 1 );
	$query: if( length( $value ) > 2, unset-nth( $value, 1 ), nth( $value, 2 ) );
	$accepted: ( 'from', 'until', 'only' );

	@if index( $accepted, $key ) {
		@if $key == 'from' {
			@include break-from( $query ) {
				@content;
			}
		} @else if $key == 'until' {
			@include break-until( $query ) {
				@content;
			}
		} @else if $key == 'only' {
			@include break-only( $query ) {
				@content;
			}
		}
	}
}


//
// Return minimum breakpoint width
//

@function break-from( $query ) {
	$value: $query;

	@if map-has-key( $breakpoints, $query ) {
		$value: map-get( $breakpoints, $query );
	}

	@return if( $value != 0, $value, null );
}


//
// Return maximum breakpoint width
//

@function break-until( $query ) {
	$value: $query;

	@if map-has-key( $breakpoints, $query ) {
		$value: map-get( $breakpoints, $query );
		$unit: unit( $value );

		@if $unit == 'em' {
			$value: em( px( $value ) - 1 );
		} @else if $unit == 'rem' {
			$value: rem( px( $value ) - 1 );
		} @else {
			$value: $value - 1;
		}
	}

	@return $value;
}


//
// Return minimum and maximum breakpoint width
//

@function break-only( $query ) {
	$value: $query;
	$names: map-keys( $breakpoints );
	$index: index( $names, $query );

	@if map-has-key( $breakpoints, $query ) {
		$value: set-nth( $value, 1, $query );
		$query: if( $index < length( $names ), nth( $names, $index + 1 ), null );
		$value: append( $value, $query );
	}

	@if map-has-key( $breakpoints, nth( $value, 1 ) ) {
		$value: set-nth( $value, 1, break-from( nth( $value, 1 ) ) );
	}

	@if map-has-key( $breakpoints, nth( $value, 2 ) ) {
		$value: set-nth( $value, 2, break-until( nth( $value, 2 ) ) );
	}

	@return $value;
}
